{% extends 'base_lecture.html' %}


{% block title %}
{{ course.course_title }} | LaunchDev
{% endblock title %}

{% block meta %}
    <meta name="description" content="{{ course.seo_course_description }}">
    <meta name="keywords" content="{{ course.seo_course_keywords }}">
{% endblock meta %}

{% block content %}
    <div class="lecture-container">
    
    {% comment %} Lecture Sidebar Goes Here {% endcomment %}
    {% include 'partials/_lecture_sidebar.html' %}


    <main role="main" class="lecture-main">

        {% if first_lecture %}
            {% for lecture_selected in first_lecture %}
    
                <!-- Video Player Section -->
                {% if lecture_selected.lecture_file %}
                    <div class="video-player-wrapper">
                        <video controls class="video-player" preload="metadata">
                            <source src="{{ lecture_selected.lecture_file.url }}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                {% endif %}

                <!-- Action Bar -->
                <div class="action-bar">
                    <h1 class="lecture-title-main">{{ lecture_selected.lecture_title }}</h1>
                    <div class="action-bar-buttons">
                        {% if lecture_selected.lecture_file %}
                        <a href="{{ lecture_selected.lecture_file.url }}" target="_blank" class="btn-action btn-download">
                            <svg class="action-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Download
                        </a>
                        {% endif %}
                    </div>
                </div>

                {% if not lecture_selected.lecture_file %}
                    <div class="lecture-alert alert-warning">
                        <svg class="alert-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Video file is not available for this lecture.
                    </div>
                {% endif %}

                <!-- Lecture Notes Section -->
                {% if lecture_selected.lecture_description %}
                <article class="lecture-notes">
                    <h2 class="notes-heading">Lecture Notes</h2>
                    
                    <section class="notes-section">
                        {{ lecture_selected.lecture_description|safe }}
                    </section>
                </article>
                {% endif %}
            
            {% endfor %}

            {% else %}

            <!-- Engaging empty state -->
            <div class="empty-state">
                <div class="empty-state-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="empty-state-icon" viewBox="0 0 16 16">
                        <path d="M0 12V4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm6.79-6.907A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"/>
                    </svg>
                    <h5 class="empty-state-title">No lectures yet</h5>
                    <p class="empty-state-text">Content is being prepared. Check back soon!</p>
                    <a href="{% url 'courses:home' %}" class="btn btn-primary">Back to Home</a>
                </div>
            </div>

        {% endif %}


    </main>


  </div>
{% endblock content %}